{% extends 'blog/base.html' %}

{% block title %}MathMaster - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block content %}
<!-- –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è -->
<div class="content-card" style="text-align: center; background: linear-gradient(135deg, #4361ee, #3a0ca3); color: white; padding: 1.5rem;">
    <h1 style="font-size: 2rem; margin-bottom: 0.8rem;">üßÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MathMaster!</h1>
    <p style="font-size: 1.1rem; opacity: 0.9;">–ò–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫—É —á–µ—Ä–µ–∑ –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏</p>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.8rem; margin-bottom: 1.5rem;">
    <div class="content-card" style="text-align: center; padding: 1rem;">
        <div style="font-size: 1.8rem; color: #4361ee;">üìö</div>
        <h3 style="color: #4361ee; font-size: 1.2rem;">{{ page_obj.paginator.count }}+</h3>
        <p style="color: #6c757d; font-size: 0.9rem;">–°—Ç–∞—Ç–µ–π</p>
    </div>
    <div class="content-card" style="text-align: center; padding: 1rem;">
        <div style="font-size: 1.8rem; color: #28a745;">üí™</div>
        <h3 style="color: #28a745; font-size: 1.2rem;">50+</h3>
        <p style="color: #6c757d; font-size: 0.9rem;">–ó–∞–¥–∞—á</p>
    </div>
    <div class="content-card" style="text-align: center; padding: 1rem;">
        <div style="font-size: 1.8rem; color: #ff6b6b;">üéØ</div>
        <h3 style="color: #ff6b6b; font-size: 1.2rem;">3</h3>
        <p style="color: #6c757d; font-size: 0.9rem;">–£—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</p>
    </div>
</div>

<!-- –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π -->
<div class="content-card">
    <h2 style="color: #4361ee; margin-bottom: 1.5rem; text-align: center; border-bottom: 2px solid #4361ee; padding-bottom: 0.8rem;">
        üìö –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
    </h2>

    {% for post in page_obj %}
    <div class="post-card">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.8rem;">
            <div>
                <span class="math-badge" style="background: {% if post.difficulty == 'beginner' %}#28a745{% elif post.difficulty == 'intermediate' %}#ffc107{% else %}#dc3545{% endif %}">
                    {{ post.get_difficulty_display }}
                </span>
                {% if post.category %}
                <span class="math-badge" style="background: #6c757d;">
                    {{ post.category.name }}
                </span>
                {% endif %}
            </div>
            <div style="color: #6c757d; font-size: 0.85rem;">
                ‚è±Ô∏è {{ post.reading_time }} –º–∏–Ω
            </div>
        </div>

        <h3 style="color: #3a0ca3; margin-bottom: 0.8rem; font-size: 1.3rem;">
            <a href="{% url 'post_detail' pk=post.pk %}" style="color: inherit; text-decoration: none;">
                {{ post.title }}
            </a>
        </h3>

        <p style="color: #555; margin-bottom: 1.2rem; line-height: 1.5; font-size: 1rem;">
            {{ post.content|truncatewords:35 }}
        </p>

        {% if post.theory_content %}
        <div style="background: #f8f9fa; padding: 0.8rem; border-radius: 6px; margin-bottom: 0.8rem; border-left: 3px solid #4361ee;">
            <strong style="color: #4361ee; font-size: 0.9rem;">üìñ –¢–µ–æ—Ä–∏—è:</strong>
            <span style="color: #495057; font-size: 0.9rem;">
                {{ post.theory_content|truncatewords:20 }}
            </span>
        </div>
        {% endif %}

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.2rem; padding-top: 0.8rem; border-top: 1px solid #e9ecef;">
            <div style="display: flex; align-items: center; gap: 0.6rem;">
                <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="–ê–≤—Ç–æ—Ä"
                     style="width: 32px; height: 32px; border-radius: 50%;">
                <div>
                    <div style="font-weight: 600; color: #333; font-size: 0.9rem;">{{ post.author.username }}</div>
                    <div style="color: #6c757d; font-size: 0.8rem;">
                        {{ post.created_date|date:"d.m.Y" }}
                    </div>
                </div>
            </div>

            <a href="{% url 'post_detail' pk=post.pk %}"
               class="btn btn-primary"
               style="text-decoration: none; font-size: 0.9rem; padding: 0.5rem 1rem;">
                –ß–∏—Ç–∞—Ç—å ‚Üí
            </a>
        </div>
    </div>
    {% empty %}
    <div style="text-align: center; padding: 2rem; color: #6c757d;">
        <div style="font-size: 3rem; margin-bottom: 0.8rem;">üìù</div>
        <h3 style="color: #4361ee; margin-bottom: 0.8rem;">–°—Ç–∞—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h3>
        <p style="font-size: 1rem;">–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –¥–æ–±–∞–≤–∏—Ç –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª!</p>
    </div>
    {% endfor %}
</div>
{% endblock %}